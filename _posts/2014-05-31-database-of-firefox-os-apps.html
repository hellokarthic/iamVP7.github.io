---
layout: post
title: Database of Firefox OS Apps
date: 2014-05-31 09:42:00.000000000 +05:30
type: post
published: true
status: publish
categories:
- Firefox
- Firefox OS
- Firefox OS Tutorials
tags: []
meta:
  blogger_blog: www.technoruler.com
  blogger_author: VISWAPRASATH KS
  blogger_cb097c283b9bbfde97b4822e7250157d_permalink: '434017595007469625'
author:
  login: viswaprasath
  email: shihan.viswa@gmail.com
  display_name: Vitchu
  first_name: ''
  last_name: ''
---
<div dir="ltr" style="text-align:left;">
<div class="tr_bq"><a href="http://technorulerin.files.wordpress.com/2014/05/cc249-indexeddb.png" style="clear:right;float:right;margin-bottom:1em;margin-left:1em;"><img border="0" src="{{ site.baseurl }}/assets/cc249-indexeddb.png" height="200" width="200" /></a>
<div style="text-align:justify;">Mozilla has developed a special database for storing the data for the Firefox OS applications. It is simple IndexedDB.</div>
</div>
<div style="text-align:justify;"></div>
<div style="text-align:justify;">From Mozilla Developers Network we can know what is IndexedDB .If you are worked only with Relational Database Management System, then for the first time it will be very difficult to use. But you can easily master this database since you work more with Javascript while developing mobile applications for Firefox.</div>
<div style="text-align:justify;"></div>
<div></div>
<div></div>
<div></div>
<blockquote class="tr_bq"><p>IndexedDB is an API for client-side storage of significant amounts of structured data and for high performance searches on this data using indexes. While <a href="https://developer.mozilla.org/en-US/docs/DOM/Storage">DOM Storage</a> is useful for storing smaller amounts of data, it is less useful for storing larger amounts of structured data. IndexedDB provides a solution.</p></blockquote>
<p>Below is the simple code which will initialize the database when the application gets started.</p>
<blockquote class="tr_bq"><p>function initializeDB() {<br /><span class="Apple-tab-span" style="white-space:pre;"> </span>if (window.indexedDB) {<br /><span class="Apple-tab-span" style="white-space:pre;"> </span>  console.log("IndexedDB support is there");<br /><span class="Apple-tab-span" style="white-space:pre;"> </span>}<br /><span class="Apple-tab-span" style="white-space:pre;"> </span>else {<br /><span class="Apple-tab-span" style="white-space:pre;"> </span>   alert("Indexed DB is not supported. ");<br /><span class="Apple-tab-span" style="white-space:pre;"> </span>}</p>
<p><span class="Apple-tab-span" style="white-space:pre;"> </span>// open the database<br /><span class="Apple-tab-span" style="white-space:pre;"> </span>// 1st parameter : Database name. We are using the name 'notesdb'<br /><span class="Apple-tab-span" style="white-space:pre;"> </span>// 2nd parameter is the version of the database.<br /><span class="Apple-tab-span" style="white-space:pre;"> </span>var request = indexedDB.open('notesdb', 1);<br /><span class="Apple-tab-span" style="white-space:pre;"> </span><span class="Apple-tab-span" style="white-space:pre;"> </span>request.onsuccess = function (e) {<br /><span class="Apple-tab-span" style="white-space:pre;"> </span>  // e.target.result has the connection to the database<br /><span class="Apple-tab-span" style="white-space:pre;"> </span>  db = e.target.result;<br /><span class="Apple-tab-span" style="white-space:pre;"> </span>  //Alternately, if you want - you can retrieve all the items<br /><span class="Apple-tab-span" style="white-space:pre;"> </span>}<br /><span class="Apple-tab-span" style="white-space:pre;"> </span><br /><span class="Apple-tab-span" style="white-space:pre;"> </span>request.onerror = function (e) {<br /><span class="Apple-tab-span" style="white-space:pre;"> </span>   console.log(e);<br /><span class="Apple-tab-span" style="white-space:pre;"> </span>};<br /><span class="Apple-tab-span" style="white-space:pre;"> </span><br /><span class="Apple-tab-span" style="white-space:pre;"> </span>// this will fire when the version of the database changes<br /><span class="Apple-tab-span" style="white-space:pre;"> </span>// We can only create Object stores in a versionchange transaction.<br /><span class="Apple-tab-span" style="white-space:pre;"> </span>request.onupgradeneeded = function (e) {<br /><span class="Apple-tab-span" style="white-space:pre;"> </span>   // e.target.result holds the connection to database<br /><span class="Apple-tab-span" style="white-space:pre;"> </span>   db = e.target.result;<br /><span class="Apple-tab-span" style="white-space:pre;"> </span>  <br /><span class="Apple-tab-span" style="white-space:pre;"> </span>   if (db.objectStoreNames.contains("notes")) {<br /><span class="Apple-tab-span" style="white-space:pre;"> </span>     db.deleteObjectStore("notes");<br /><span class="Apple-tab-span" style="white-space:pre;"> </span>   }<br /><span class="Apple-tab-span" style="white-space:pre;">  </span><span class="Apple-tab-span" style="white-space:pre;"> </span>   // create a store named 'notes'<br /><span class="Apple-tab-span" style="white-space:pre;"> </span>   // 1st parameter is the store name<br /><span class="Apple-tab-span" style="white-space:pre;"> </span>   // 2nd parameter is the key field that we can specify here. Here we have opted for autoIncrement but it could be your<br /><span class="Apple-tab-span" style="white-space:pre;"> </span>   // own provided value also.<br /><span class="Apple-tab-span" style="white-space:pre;"> </span>   var objectStore = db.createObjectStore('notes', { keyPath: 'id', autoIncrement: true });<br /><span class="Apple-tab-span" style="white-space:pre;"> </span>  <br /><span class="Apple-tab-span" style="white-space:pre;"> </span>   console.log("Object Store has been created");<br /><span class="Apple-tab-span" style="white-space:pre;"> </span>};<br />} </p></blockquote>
<p>Below line of code will help you to add the elements in the database</p>
<blockquote class="tr_bq"><p>function addItem() {<br /> // create the transaction with 1st parameter is the list of stores and the second specifies<br /><span class="Apple-tab-span" style="white-space:pre;">  </span>   // a flag for the readwrite option<br /><span class="Apple-tab-span" style="white-space:pre;">  </span>   var transaction = db.transaction([ 'notes' ], 'readwrite');<br /><span class="Apple-tab-span" style="white-space:pre;"> </span><span class="Apple-tab-span" style="white-space:pre;">  </span>   //Create the Object to be saved i.e. our Note<br /><span class="Apple-tab-span" style="white-space:pre;">  </span>   var value = {};<br /><span class="Apple-tab-span" style="white-space:pre;">  </span>   value.title = title;<br /><span class="Apple-tab-span" style="white-space:pre;">  </span>   value.details = ing;<br /><span class="Apple-tab-span" style="white-space:pre;">   </span>value.noteDes = desc;<br /><span class="Apple-tab-span" style="white-space:pre;">  </span>   // alert("hai");<br /><span class="Apple-tab-span" style="white-space:pre;">  </span>   // add the note to the store<br /><span class="Apple-tab-span" style="white-space:pre;">  </span>   var store = transaction.objectStore('notes');<br /><span class="Apple-tab-span" style="white-space:pre;">  </span>   var request = store.add(value);<br /><span class="Apple-tab-span" style="white-space:pre;">  </span>   request.onsuccess = function (e) {<br /><span class="Apple-tab-span" style="white-space:pre;">   </span>  alert("Added Successfully");<br /><span class="Apple-tab-span" style="white-space:pre;">  </span>   };<br /><span class="Apple-tab-span" style="white-space:pre;">  </span>   request.onerror = function (e) {<br /><span class="Apple-tab-span" style="white-space:pre;">  </span>     alert("Error  " + e.value);<br /><span class="Apple-tab-span" style="white-space:pre;">  </span>   }<br />}</p></blockquote>
<p> Below lines of code will allow you to show the database contents<br />
<blockquote>function display()<br />{<br /><span class="Apple-tab-span" style="white-space:pre;">  </span>  //Read the notes<br />var transaction = db.transaction(["notes"]);<br />var objectStore = transaction.objectStore("notes")<br /><span class="Apple-tab-span" style="white-space:pre;">  </span>  <span class="Apple-tab-span" style="white-space:pre;">  </span>  // open a cursor to retrieve all items from the 'notes' store<br /><span class="Apple-tab-span" style="white-space:pre;">  </span>  objectStore.openCursor().onsuccess = function (e) {<br />//document.getElementById("note-list").innerHTML='';<br /><span class="Apple-tab-span" style="white-space:pre;">   </span>  var cursor = e.target.result;</p>
<p><span class="Apple-tab-span" style="white-space:pre;">   </span>  if (cursor) {<br /><span class="Apple-tab-span" style="white-space:pre;">   </span>    var value = cursor.value;</p>
<p>var para=document.createElement("h1");<br />var node=document.createTextNode(value.title);<br />para.appendChild(node);<br />var element=document.getElementById("note-list");<br />element.appendChild(para);</p>
<p>var para=document.createElement("p");<br />var node=document.createTextNode(value.details);<br />para.appendChild(node);<br />var element=document.getElementById("note-list");<br />element.appendChild(para);<br />var para=document.createElement("p");<br />var node=document.createTextNode(value.noteDes);<br />para.appendChild(node);<br />var element=document.getElementById("note-list");<br />element.appendChild(para);<br /><span class="Apple-tab-span" style="white-space:pre;">   </span>    // move to the next item in the cursor<br /><span class="Apple-tab-span" style="white-space:pre;">    </span>cursor.continue();<br /><span class="Apple-tab-span" style="white-space:pre;">   </span>  }<br /><span class="Apple-tab-span" style="white-space:pre;">   </span><br /><span class="Apple-tab-span" style="white-space:pre;">   </span>};<br />}</p></blockquote>
<div></div>
<div>The above code will help you to learn more about how to start the database, add entries and display the entries from the database. It is very easy to use and is very simple to handle.</div>
</div>
